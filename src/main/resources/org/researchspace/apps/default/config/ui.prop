preferredLabels = { ?subject crm:P65_shows_visual_item ?visualItem . ?visualItem rdf:type crm:E34_Inscription . ?visualItem crm:P190_has_symbolic_content ?inscriptionText . OPTIONAL { ?visualItem crm:P73_has_translation/crm:P190_has_symbolic_content ?inscriptionTextTranslation . } BIND(CONCAT("Inscription: "\, ?inscriptionText\, " "\, COALESCE(?inscriptionTextTranslation\, "")) AS ?value) },{ ?subject rdf:type crm:E34_Inscription . ?subject crm:P190_has_symbolic_content ?inscriptionText . OPTIONAL { ?subject crm:P73_has_translation/crm:P190_has_symbolic_content ?inscriptionTextTranslation . } BIND(CONCAT("Inscription: "\, ?inscriptionText\, " "\, COALESCE(?inscriptionTextTranslation\, "")) AS ?value) },<http://www.cidoc-crm.org/cidoc-crm/P1_is_identified_by>/<http://www.w3.org/2000/01/rdf-schema#label>,<http://www.researchspace.org/ontology/displayLabel>,<http://www.w3.org/2000/01/rdf-schema#label>,<http://www.w3.org/2004/02/skos/core#prefLabel>

preferredThumbnails = { ?subject rso:PX_has_main_representation ?representation . ?representation a rso:EX_Digital_Image . ?representation crm:P1_is_identified_by/rso:PX_has_file_name ?fileName. BIND(CONCAT('/proxy/iiif-server/iiif/2/'\, ?fileName\, '/full/!640\,480/0/default.jpg') AS ?value) },{ ?subject rso:PX_has_main_representation ?representation . ?representation a rso:EX_Digital_Image . BIND(REPLACE(STR(?representation)\, "^.*/(.*)$"\, "$1") as ?imageID) . BIND(CONCAT('/proxy/iiif-server/iiif/2/'\, ?imageID\, '/full/!640\,480/0/default.jpg') AS ?value) },{ ?subject a rso:EX_Digital_Image . ?subject crm:P1_is_identified_by/rso:PX_has_file_name ?fileName. BIND(CONCAT('/proxy/iiif-server/iiif/2/'\, ?fileName\, '/full/!640\,480/0/default.jpg') AS ?value) },{ ?subject a rso:EX_Digital_Image . BIND(REPLACE(STR(?subject)\, "^.*/(.*)$"\, "$1") as ?imageID) . BIND(CONCAT('/proxy/iiif-server/iiif/2/'\, ?imageID\, '/full/!640\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rso:EX_Digital_Image . ?representation crm:P1_is_identified_by/rso:PX_has_file_name ?fileName. BIND(CONCAT('/proxy/iiif-server/iiif/2/'\, ?fileName\, '/full/!640\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rso:EX_Digital_Image . BIND(REPLACE(STR(?representation)\, "^.*/(.*)$"\, "$1") as ?imageID) . BIND(CONCAT('/proxy/iiif-server/iiif/2/'\, ?imageID\, '/full/!640\,480/0/default.jpg') AS ?value) }, { ?subject crm:P138i_has_representation ?representation . ?representation a rso:EX_Digital_Image_Region . ?representation crmdig:L49_is_primary_area_of ?image . ?image crm:P1_is_identified_by/rso:PX_has_file_name ?fileName. ?representation rso:boundingBox ?bb. BIND(STRAFTER(?bb\, 'xywh=') AS ?boundingBox). BIND(CONCAT('/proxy/iiif-server/iiif/2/'\, ?fileName\, '/'\, ?boundingBox\, '/!640\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rso:EX_Digital_Image_Region . ?representation crmdig:L49_is_primary_area_of ?image . ?representation rso:boundingBox ?bb. BIND(STRAFTER(?bb\, 'xywh=') AS ?boundingBox). BIND(REPLACE(STR(?image)\, "^.*/(.*)$"\, "$1") as ?imageID) . BIND(CONCAT('/proxy/iiif-server/iiif/2/'\, ?imageID\, '/'\, ?boundingBox\, '/!640\,480/0/default.jpg') AS ?value) }, <http://www.researchspace.org/ontology/PX_has_main_representation>,<http://www.cidoc-crm.org/cidoc-crm/P138i_has_representation>, { ?object <http://www.researchspace.org/ontology/PX_has_main_representation> ?subject . BIND(?subject as ?value) }

templateIncludeQuery = PREFIX rso: <http://www.researchspace.org/ontology/> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>  select ?type where { { FILTER(STRSTARTS(STR(??)\\, "http://www.researchspace.org/resource/user/")). BIND(rso:User as ?type). BIND(-1 as ?index) } UNION {?? <http://www.researchspace.org/ontology/PX_object_type>  ?type . BIND(0 AS ?index) } UNION {?? <http://www.cidoc-crm.org/cidoc-crm/P2_has_type>  ?type . BIND(1 AS ?index) } UNION { ?? a ?type . BIND(2 AS ?index) }  UNION { ?? a ?t .  ?t rdfs:subClassOf* ?type . FILTER (?type in (crm:E28_Conceptual_Object\\, crm:E24_Physical_Man-Made_Thing\\, crm:E39_Actor\\, crm:E53_Place\\, crm:E5_Event)). BIND(3 AS ?index) }  UNION { ?? a ?t . ?t rdfs:subClassOf+ ?type . BIND(4 AS ?index) } } ORDER BY ?index