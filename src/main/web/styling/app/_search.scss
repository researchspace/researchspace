/**
 * ResearchSpace
 * Copyright (C) 2015-2020, Â© Trustees of the British Museum
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

 
/* Searching page */
.#{$prefix}search-page {
  .tab-content {
    .tab-pane {
      padding: 0px 20px;
    }
  }

  .form-group {
    display: flex;
    justify-content: center;
    align-items: center;

    margin: 25px 0;
  }

  #search-results {
    .search-tab-grid {
      .btn-default {
        border: none;
        padding: 5px 0;
        margin-left: -8px;
      }

      .dropdown-menu {
        font-size: 13px;
        left: -11px;
      }

      .griddle-custom-row {
        padding-top: 10px;
      }
    }
  }

  .structuredSearch {
    .QueryBuilder--searchAreaHolder {
      margin-left: 8rem;

      .QueryBuilder--searchSummaryHolder {
        margin-bottom: 22px;
        margin-top: 30px;
        margin-left: 11px;
      }
    }
  }

  .SemanticSearchContextualizedResult--selectorGroup.form-group {
    margin-top: 0;

    label {
      padding-right: 20px;
    }
  }

  #semantic-search-text-input {
    height: 44px;
    border-color: $color-primary-50;
    background-color: transparent;
    border-radius: 3px;
    padding: 4px 8px 4px 15px;
    background-image: url(/assets/images/icons/search.svg);
    background-repeat: no-repeat;
    background-size: 18px 18px;
    background-position: right 8px center;

    font-size: 14px;

    &::placeholder {
      /* Chrome, Firefox, Opera, Safari 10.1+ */
      color: $color-primary-100;
      opacity: 1; /* Firefox */
    }

    &:focus {
      outline: none;

      &::placeholder {
        /* Chrome, Firefox, Opera, Safari 10.1+ */
        opacity: 0.7; /* Firefox */
      }
    }
  }

  .ItemSelector--itemSelector,
  .QueryBuilder--searchClause {
    border: 1px solid #ddd;
  }

  .QueryBuilder--selectedItem::after {
    border: 1px solid #ddd;
    border-bottom: none;
    border-left: none;
  }

  .QueryBuilder--domainSelection li {
    border-top: 1px solid #ddd;
  }

  .QueryBuilder--addDisjunctButton.QueryBuilder--active,
  .QueryBuilder--addDisjunctButton:active,
  .QueryBuilder--addDisjunctButton:hover,
  .QueryBuilder--open > .QueryBuilder--addDisjunctButton.QueryBuilder--dropdown-toggle,
  .QueryBuilder--addConjunctButton.QueryBuilder--active,
  .QueryBuilder--addConjunctButton:active,
  .QueryBuilder--addConjunctButton:hover,
  .QueryBuilder--open > .QueryBuilder--addConjunctButton.QueryBuilder--dropdown-toggle {
    border-color: #ddd !important;
  }

  .QueryBuilder--domainSelection li:first-child {
    border-top: none;
  }

  .ItemSelector--itemHolder,
  .QueryBuilder--relationPlaceholder,
  .QueryBuilder--activeTerm {
    color: $color-dark !important;
  }

  .QueryBuilder--itemHolder {
    padding-left: 16px !important;
    padding-right: 3px !important;
    min-width: 120px !important;
  }

  //.QueryBuilder--selectedRelation.QueryBuilder--selectedItem,
  //.QueryBuilder--relationPlaceholder,
  //.QueryBuilder--itemHolder  {

  //    color: $color-info !important;
  //}

  //.QueryBuilder--searchClause .QueryBuilder--relationPlaceholder,
  //.QueryBuilder--searchClause .QueryBuilder--relationPlaceholder::after,
  //.QueryBuilder--searchClause > div:nth-child(2) {

  // background-color: $color-primary-10;
  //}

  .QueryBuilder--searchClause > div:first-child,
  .QueryBuilder--searchClause > div:first-child .QueryBuilder--selectedDomain.QueryBuilder--selectedItem,
  .QueryBuilder--selectedDomain.QueryBuilder--selectedItem::after,
  .QueryBuilder--searchClause > div:nth-child(3),
  .QueryBuilder--searchClause
    > div:nth-child(3).QueryBuilder--itemHolder
    .QueryBuilder--selectedTerm.QueryBuilder--selectedItem,
  .QueryBuilder--searchClause
    > div:nth-child(3).QueryBuilder--itemHolder
    .QueryBuilder--selectedTerm.QueryBuilder--selectedItem:hover,
  .QueryBuilder--searchClause
    > div:nth-child(3).QueryBuilder--itemHolder
    .QueryBuilder--selectedTerm.QueryBuilder--selectedItem::after,
  .QueryBuilder--searchClause
    > div:nth-child(3).QueryBuilder--itemHolder
    .QueryBuilder--selectedRange.QueryBuilder--selectedItem:hover,
  .QueryBuilder--selectedRange.QueryBuilder--selectedItem::after {
    background-color: $color-primary-50 !important;
  }

  .QueryBuilder--addDisjunctButton,
  .QueryBuilder--addConjunctButton {
    visibility: visible !important;
    color: $color-dark !important;
    opacity: 0.2;
    padding-right: 0px !important;
    min-width: 90px !important;
  }

  .QueryBuilder--addDisjunctButton.QueryBuilder--active, 
    .QueryBuilder--addDisjunctButton:active, 
    //.QueryBuilder--addDisjunctButton:hover, 
    .QueryBuilder--open>.QueryBuilder--addDisjunctButton.QueryBuilder--dropdown-toggle,
    .QueryBuilder--actionableItem:hover ,
    .QueryBuilder--actionableItem::after {
    opacity: 1;
    color: $color-dark !important;
  }

  .QueryBuilder--selectedTerm.QueryBuilder--selectedItem,
  .SearchSummary--word.SearchSummary--domain,
  .SearchSummary--word.SearchSummary--Resource {
    width: max-content;
    font-family: $font-family-base;
    font-weight: 600;
    color: $color-dark;
    font-size: 15px !important;
    line-height: 1.2;
    font-weight: normal !important;
  }

  .SearchSummary--word {
    margin: 0 2.5px !important;
  }

  .SearchSummary--start {
    margin: 0 5px 0 0 !important;
  }

  .QueryBuilder--searchAreaHolder img {
    height: 25px !important;
    width: 25px !important;
    margin-right: 5px;
  }

  .ItemSelector--itemHolder.ItemSelector--active,
  .ItemSelector--itemHolder:active,
  .ItemSelector--itemHolder:hover,
  .ItemSelector--open > .ItemSelector--itemHolder.ItemSelector--dropdown-toggle,
  .ItemSelector--itemHolder.ItemSelector--focus,
  .ItemSelector--itemHolder:focus {
    background-color: $color-primary-50 !important;
  }

  .clearable-input__input.form-control {
    height: auto;
  }

  .SemanticTreeInput--browseButton.btn.btn-default {
    border: none;
    margin-left: 10px;
    margin-right: 4px;
    padding: 14px 10px;
  }

  .btn.btn-default.QueryBuilder--nestedSearchButton {
    border: none;
    margin-left: 0px !important;
  }

  .SemanticTreeInput--browseButton.btn.btn-default:hover,
  .SemanticTreeInput--browseButton.btn.btn-default:focus,
  .SemanticTreeInput--browseButton.btn.btn-default:visited,
  .btn.btn-default.QueryBuilder--nestedSearchButton:hover,
  .btn.btn-default.QueryBuilder--nestedSearchButton:focus,
  .btn.btn-default.QueryBuilder--nestedSearchButton:visited {
    background-color: transparent;
  }

  .SemanticTreeInput--browseButton.btn.btn-default:hover,
  .SemanticTreeInput--browseButton.btn.btn-default:focus,
  .SemanticTreeInput--browseButton.btn.btn-default:focus-within,
  .btn.btn-default.QueryBuilder--nestedSearchButton:hover,
  .btn.btn-default.QueryBuilder--nestedSearchButton:focus,
  .btn.btn-default.QueryBuilder--nestedSearchButton:focus-within {
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 5px 0 rgba(0, 0, 0, 0.1);
  }

  .btn.btn-default.QueryBuilder--nestedSearchButton {
    border: none;
  }

  .LazyTreeSelector--item {
    padding-top: 15px;
  }

  .btn.btn-link.QueryBuilder--removeConjunctButton {
    color: rgba(29, 10, 112, 0.8);
    padding-left: 40px !important;
  }

  .QueryBuilder--selectedTerm.QueryBuilder--selectedItem {
    font-weight: 700;
  }

  .ItemSelector--itemHolder.QueryBuilder--categorySelectionItem span {
    font-family: $font-family-base;
    font-size: 16px !important;
    line-height: 1.2;
    letter-spacing: 0.1px;
  }

  #semantic-search-result-count {
    font-family: $font-family-base;
    color: $color-dark;
    font-size: 15px;
    line-height: 1.2;
  }

  .num-results-color {
    font-family: $font-family-base;
    font-weight: 600;
    font-size: 16px;
    padding-left: 3px;
    padding-right: 3px;
    color: $color-info;
  }

  .QueryBuilder--searchBasedTermSelectorHolder {
    margin-top: 10px;
  }

  .QueryBuilder--searchBasedTermSelector .btn {
    font-size: 13px;
    line-height: 1;
  }

  .btn.btn-default.QueryBuilder--nestedSearchButton {
    padding: 0px 5px;
  }

  .Select.DateFormatSelector--dateFormatSelect.Select--single.is-searchable .Select-control,
  .Select.QueryBuilder--resourceSelector .Select-control {
    height: 40px !important;
  }

  .DateFormatSelector--dateMenuPlaceholderItem {
    color: $color-dark !important;
    padding: 4px 6px !important;
    border: 1px solid #9289b785 !important;
  }

  .Select.DateFormatSelector--dateFormatSelect.Select--single.is-searchable {
    .Select-menu-outer {
      max-height: 242px !important;

      .Select-menu {
        max-height: 250px !important;
      }

      .Select-option {
        padding: 10px 14px !important;
      }

      .Select-option.is-selected,
      .Select-option.is-focused {
        background-color: $color-light-grey !important;
        color: $color-dark !important;
      }

      .DateFormatSelector--dateMenuInputItem {
        border: 1px solid #9289b761 !important;
        color: $color-dark !important;
        font-size: 13px !important;
        height: 22px !important;
      }
    }
  }

  .TextSelection--inputGroup.form-group .form-control {
    height: 38px;
  }

  .QueryBuilder--addDisjunctButton.QueryBuilder--selectedItem.QueryBuilder--actionableItem:hover,
  .QueryBuilder--addDisjunctButton.QueryBuilder--selectedItem.QueryBuilder--actionableItem:hover::after,
  .QueryBuilder--addConjunctButton.QueryBuilder--selectedItem.QueryBuilder--actionableItem:hover,
  .QueryBuilder--addConjunctButton.QueryBuilder--selectedItem.QueryBuilder--actionableItem:hover::after {
    background-color: $color-light-grey !important;
  }

  //.QueryBuilder--selectedTerm.QueryBuilder--selectedItem:hover,
  // .QueryBuilder--selectedTerm.QueryBuilder--selectedItem::after {

  // background-color: $color-primary-50 !important;
  // }

  .QueryBuilder--andSeparator,
  .QueryBuilder--whereSeparator {
    background-color: $color-dark;
    color: $color-white;
    border: none !important;
    font-family: $font-family-base;
    font-weight: 600;
    line-height: 1.2;
    font-weight: normal !important;
    margin-top: 4px;
    margin-bottom: 4px;
    font-size: 13px;
    padding: 7px 8px !important;
  }

  .LazyTreeSelector--virtualizedList {
    padding: 20px 20px 10px 10px;
  }

  .LazyTreeSelector--item {
    display: flex;
    align-items: center;
  }

  .LazyTreeSelector--itemCollapsed > input,
  .LazyTreeSelector--itemExpanded > input {
    margin: 2px 0 0;
    zoom: 1.15;
  }

  .LazyTreeSelector--itemContent {
    font-size: 14px;
  }
}

.#{$prefix}search-page .#{$prefix}results-area {
  margin-top: 30px;

  & #search-results {
    margin-top: -30px;

    .tab-pane {
      padding: 15px 10px 0px;
    }
  }

  .show-facet-button__hide {
    margin-top: 38px;
  }

  .Select-menu-outer .Select-option.is-focused {
    background-color: transparent;
  }

  .Select-menu-outer .Select-option:hover {
    background-color: $color-primary-10;
  }

  .facet__category-selector-holder .category-selector .category-item-holder {
    min-width: 38px;
    background-color: transparent;
  }

  .facet__category-selector-holder .category-item {
    height: 38px !important;
    color: $color-dark !important;
  }

  .category-item-holder--active,
  .btn.btn-default.category-item-holder.category-item-holder--active,
  .btn.btn-default.category-item-holder.category-item-holder--active:hover {
    background-color: $color-primary-10 !important;
  }

  .facet__category-selector-holder .category-selector li {
    border: 1px solid $color-dark;
  }

  .semantic-search-results-actions .btn-default:hover,
  .semantic-search-results-actions .btn-default:focus {
    color: $color-white;
    background-color: $color-dark;
  }

  .FacetBreadcrumbs--breadcrumbs {
    margin-top: 0 !important;
    border-bottom: none !important;
  }

  .FacetBreadcrumbs--values {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    height: 30px;
    text-align: center;
    white-space: nowrap;
    border-top-left-radius: 2px;
    border-bottom-left-radius: 2px;
  }

  .FacetBreadcrumbs--values,
  .FacetBreadcrumbs--values:active,
  .FacetBreadcrumbs--values:active:hover,
  .FacetBreadcrumbs--values:focus,
  .FacetBreadcrumbs--values:hover {
    border: none !important;
  }

  .FacetBreadcrumbs--values.btn.btn-default,
  .FacetBreadcrumbs--cancelButton.btn.btn-default.btn-xs {
    background-color: $color-info;
    color: $color-white;
    border: none;

    font-family: $font-family-base;
    font-size: 13px !important;
    line-height: 1.2;
    letter-spacing: 0.6px;

    & .FacetBreadcrumbs--relation {
      font-family: $font-family-base;
      font-weight: 600;
      margin-right: 6px !important;
    }

    & .FacetBreadcrumbs--or {
      margin: 0 3px !important;
      opacity: 0.6 !important;
    }
  }

  .FacetBreadcrumbs--cancelButton.btn.btn-default.btn-xs {
    padding: 1px 7px 1px 0px;
    border-top-right-radius: 2px;
    border-bottom-right-radius: 2px;
  }
}

#search-results .griddle-custom .griddle-footer {
  padding: 20px 0px;
}

.QueryBuilder--magnifierIcon {
  background-image: url(/assets/images/icons/search.svg) !important;
}

.search-tab-timeline,
.search-tab-chart {
  .btn-default {
    color: #6b6565;
    background-color: transparent;
    border: 1px solid #ddddddbd;
    padding: 8px 10px;
    font-family: $font-family-base;
    font-size: 12px;
    letter-spacing: 0.1px;
    text-transform: uppercase;

    &:hover {
      // box-sizing: border-box;
      // border-bottom: 3px $color-dark solid !important;
      box-shadow: 0px -2.5px 0px 0px $color-dark inset;
    }
  }

  .btn-default.active {
    color: black;
    background: #ddddddbd;
  }
}

/* Card in Searching results as Grid */
#search-results .rs-grid-element {
  font-family: $font-family-base;
  color: $color-dark !important;
  font-size: 14px !important;
  line-height: 1.2;

  box-shadow: 0 2px 2px 0px rgba(0, 0, 0, 0.1), 0 2px 10px 0 rgba(0, 0, 0, 0.09);

  &:hover {
    box-shadow: 1px 2px 8px 0px rgb(139, 132, 158), 1px 3px 12px 2px rgba(0, 0, 0, 0.07);
  }

  a {
    font-family: $font-family-base;
    color: $color-dark !important;
    font-size: 14px !important;
    line-height: 1.2;
  }

  &.panel {
    border-radius: 6px;
    background-color: #fdfdfd;
    border: 0.5px solid $color-primary-50;
  }

  &.panel-default {
    border-color: $color-primary-50;
  }

  & .panel-body {
    display: initial !important; //to overwrite Core css
    padding: 0px !important;

    & .rs-card-img {
      height: 144px;
    }

    & img {
      border-top-left-radius: 6px;
      border-top-right-radius: 6px;
      border-top: 4px solid $color-white;
    }
  }

  & .panel-footer {
    padding: 9px 14px;
    background-color: #e1dee95e;
    border-top: 1px solid #e1dee9c7;
    border-bottom-left-radius: 6px;
    border-bottom-right-radius: 6px;

    .resource-card--icon {
      width: auto;
      margin-top: 0px;
      margin-left: 0px;
      opacity: 1 !important;
    }

    .resource-card--icon img {
      width: 13px !important;
      margin-top: 0px;
      display: block;
      -moz-box-sizing: border-box;
      box-sizing: border-box;
      padding-right: 0px !important;
      margin-right: 5px;
    }

    .rs-card-footer--text {
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      max-width: 77px !important;
    }

    .set-management__item-actions {
      margin-left: 0px !important;
    }

    .dropdown-menu.dropdown-menu-right {
      right: -32px !important;
      top: 26px !important;
    }

    .btn-link {
      color: $color-dark;
    }
  }

  & .dropdown-menu {
    top: 120%;
    right: -5px;
    left: unset;

    & > li > a {
      font-family: $font-family-base;
      color: $color-dark;
      font-size: 14px;
      line-height: 1.2;
      padding: 5px 12px !important;

      &:hover,
      &:focus {
        background-color: #e1dee95e;
        color: $color-dark;
      }
    }
  }
}

#search-results {
  .card.rs-object-card.rs-default-card {
    cursor: grab;
  }

  .rs-card-container {
    margin: 10px;
    border: 1px solid transparent;
  }

  .rs-card-container:hover {
    border: 1px dashed $color-primary-100;
    border-radius: 5px;
    cursor: grab;
  }
}

/* Facet section */
.facet__relation__header:focus,
.facet__relation__header:hover {
  background-color: $color-primary-10;
  color: $color-dark;
}

.facet__relation__values .clearable-input {
  width: 97%;
  background-color: $color-light-grey;
}

.facet__relation__values .clearable-input > * {
  margin: 3.5px;
  min-width: 115px;
}

.facet__relation__values > div:nth-child(2) {
  height: auto !important; //overwrite inline style
  max-height: 250px;
  width: 220px;
  padding-left: 10px;
}

.facet__relation__values
  .clearable-input.input-group.has-feedback.facet__relation__values__filter
  input.clearable-input__input.form-control {
  height: 24px;
  padding: 4px 10px;
}

.facet__relation__values em.facet__relation__warning {
  font-style: normal;
  font-size: 12px;
}

.facet__relation__values__value.checkbox {
  font-size: 13px;
}

.facet__relation__values__value:focus,
.facet__relation__values__value:hover {
  color: $color-dark;
  background-color: $color-light-grey;
}

.facet__relation__body .clearable-input__clear {
  width: 50px;
}

.facet__relation__values__value.checkbox input[type='checkbox'] {
  margin: 4px 0 0 -20px;
}

/* Search table results */
.search-tab-table {

  .search-result-table__type {

    display: flex;
    align-items: center;

    .rs-icon {
      margin-right: 8px;
      color: $color-primary-100;
    }

    .search-result-table__type-value {

      color: $color-primary-100;
      font-weight: 600;
      line-height: 1.2;
      text-transform: uppercase;
      letter-spacing: 0.3px;
    }
  }

  .table > tbody tr.standard-row:hover {
    outline: 1px dashed $color-primary-100;
    outline-offset: -7px;
  }

  .table > tbody > tr > td {
    cursor: grab;
    padding: 16px 8px !important;
  }

  .table > tbody > tr.standard-row > td:first-of-type {
    width: 30%;
  }
}

/* Chart results */
#mp-semantic-chart-tooltip .popover-content {
  & div:nth-child(3) {
    display: flex;
    flex-direction: row;
    align-items: center;
  }

  li {
    font-family: $font-family-base;
    font-weight: 600;
    font-size: 14px !important;
  }
}
/* Search inside a frame */

.thinking-frames__frames .ontodia-accordion-item__body {
  #search-results {
    .rs-default-card__footer {
      .rs-body-s-M,
      span.rs-body-s-B {
        font-size: 12px;
      }
    }
  }
}
