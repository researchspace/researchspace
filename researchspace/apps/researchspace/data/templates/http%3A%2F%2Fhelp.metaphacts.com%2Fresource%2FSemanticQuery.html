<ol class="page-breadcrumb">
  <li>
    <mp-link title="Home" url="/">Home</mp-link>
  </li>
  <li>
    <semantic-link title="Help" uri="http://help.metaphacts.com/resource/Start">Help</semantic-link>
  </li>
  <li>
    <semantic-link title="Documentation" uri="http://help.metaphacts.com/resource/DocumentationOverview">Documentation</semantic-link>
  </li>
  <li>
    <semantic-link title="Components" uri="http://help.metaphacts.com/resource/HTML5Components">Components</semantic-link>
  </li>
  <li class="active">Query Component</li>
</ol>

<div class="page">
  <div class='page__body'>
    <h1>Query Component </h1>
    <div class="documentation__intro">
      <div class="documentation__intro__description">
        The semantic query component is the most powerful and flexible component to query and render SPARQL SELECT query results.
        <p>&nbsp;</p>
        <p>
          Compared to the other visualization components such as tables or trees, the semantic query result component is much simpler in it's basic configuration. 
      However, at the same time it requires advanced knowledge about the structure of SPARQL SELECT result tuples as well as handlebars.js since it leaves the task of iterating and formatting the result tuples completely to the template configuration.
        </p>
      </div>
      <div class="documentation__intro__demo">
            <semantic-query 
              query='
                PREFIX foaf: <http://xmlns.com/foaf/0.1/>
                PREFIX person: <http://example.com/person/> 
                SELECT ?person ?name WHERE {                    
                  VALUES (?person ?name) { 
                    (person:alice "Alice")
                    (person:carol "Carol")
                    (person:bob "Bob")
                    (person:mike "Mike")
                  }
                }' 
              template='{{> template}}'
            >
              <template id='template'>
                <div>
                  <b>This list is generated by a SPARQL query:</b>
                  <ul>
                    {{#each bindings}}
                    <li>
                      <semantic-link uri="{{person.value}}">
                        <i class="fa fa-user" style="margin-right: 5px"></i> 
                        {{name.value}}
                      </semantic-link>
                    </li>
                    {{/each}}
                  </ul>
                </div>
              </template>
            </semantic-query>       
        </div>
    </div>
    <div style="clear:both;"></div>

    <h2>Configuration </h2>
    <mp-documentation type="SemanticQueryConfig"></mp-documentation>

    <h2>Examples </h2>
    <h3>No (Default) Template</h3>
    <div class="documentation__example">
      <div class="documentation__example__description">
        If no <code>template</code> is defined, all tuples for the <b>first projection variable</b> will we rendered as a comma-separated list.
      </div>
      <div class="documentation__example__demo">
        <mp-code-example>
          <semantic-query 
            query='
              PREFIX foaf: <http://xmlns.com/foaf/0.1/>
              PREFIX person: <http://example.com/person/> 
              SELECT ?person ?name WHERE {                    
                VALUES (?person ?name) { 
                  (person:alice "Alice")
                  (person:carol "Carol")
                  (person:bob "Bob")
                  (person:mike "Mike")
                }
              }'
            ></semantic-query>
        </mp-code-example>
      </div>
    </div>

    <h3>HTML List</h3>
    <div class="documentation__example">
      <div class="documentation__example__description">
          Renders as list with custom list entries
      </div>
      <div class="documentation__example__demo">
        <mp-code-example>
          <semantic-query 
            query='
              PREFIX foaf: <http://xmlns.com/foaf/0.1/>
              PREFIX person: <http://example.com/person/> 
              SELECT ?person ?name WHERE {                    
                VALUES (?person ?name) { 
                  (person:alice "Alice")
                  (person:carol "Carol")
                  (person:bob "Bob")
                  (person:mike "Mike")
                }
              }
            ' 
            template='{{> template}}'
          >
            <template id='template'>
              <div>
                <b>My List:</b>
                <ul>
                  {{#each bindings}}
                  <li>
                    <semantic-link uri="{{person.value}}">
                      <i class="fa fa-user" style="margin-right: 5px"></i> 
                      {{name.value}}
                    </semantic-link>
                  </li>
                  {{/each}}
                </ul>
              </div>
            </template>
          </semantic-query>
        </mp-code-example>
      </div>
    </div>


    <h3>Comma Separated Value List</h3>

    <div class="documentation__example">
      <div class="documentation__example__description">
        Rendering as comma separated list. Renders no comma after the last item, but an "and" using handlebars.js's <code>{{#if @last}}</code> expression.
        In addition, the template will be rendered as inline element by passing the style string <code>style="display: inline;"</code> down to the template item.
      </div>
      <div class="documentation__example__demo">
        <mp-code-example>
          <semantic-query 
            query='
              PREFIX foaf: <http://xmlns.com/foaf/0.1/>
              PREFIX person: <http://example.com/person/> 
              SELECT ?person ?name WHERE {                    
                VALUES (?person ?name) { 
                  (person:alice "Alice")
                  (person:carol "Carol")
                  (person:bob "Bob")
                  (person:mike "Mike")
                }
              }
            ' 
            template='{{> template}}'
            style="display: inline;"
          >
            <template id='template'>
              <div>
                {{#each bindings}}
                  <semantic-link title="{{name.value}}" uri="{{person.value}}">
                    {{name.value}}
                  </semantic-link>
                  {{#if @last}} and {{else}}, {{/if}}
                {{/each}} are persons on my list.
              </div>
            </template>
          </semantic-query>
        </mp-code-example>
      </div>
    </div>
  </div>
</div>