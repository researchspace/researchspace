<div class="page__grid-container">
  <div class="page__content-container rs-vocabulary-scheme-content">
    <div class="page__main-title-row">
      <h1 class="rs-main-title">Entity Editor</h1>
      <div style="display: flex; align-items: center;">
        <semantic-link-container uri='http://www.researchspace.org/resource/system/vocab/authority_manager_config_types'>
          <span><i class="fa fa-cog"></i></span>
        </semantic-link-container>
        <mp-overlay-dialog title="Entity editor" type="modal" class="modal-xlSize">
          <mp-overlay-dialog-trigger>
            <i class="iconmoon iconmoon-info"></i>
          </mp-overlay-dialog-trigger>
          <mp-overlay-dialog-content>
            <div>documentation</div>
          </mp-overlay-dialog-content>
        </mp-overlay-dialog>
      </div>
    </div>

        <semantic-search>
          <div class="rs-vocabulary-scheme-row">
              <h1 class="rs-vocabulary-scheme-title">Entity types</h1>
              <div>
                  <semantic-search-query-keyword query='
                              PREFIX bds: <http://www.bigdata.com/rdf/search#>
                              SELECT ?scheme WHERE {
                                ?scheme crm:P71i_is_listed_in <http://www.researchspace.org/resource/system/vocab/authority_manager_config_types> .
                                ?scheme <http://www.researchspace.org/resource/system/authority_manager/item_label> ?schemeLabel .
                                ?schemeLabel bds:search ?__token__ .
                                FILTER NOT EXISTS {
                                  ?scheme <http://www.researchspace.org/resource/system/authority_manager/membership_property> ?membershipProperty .
                                }
                              }
                          '
                          default-query='
                              PREFIX bds: <http://www.bigdata.com/rdf/search#>
                              SELECT ?scheme WHERE {
                                ?scheme crm:P71i_is_listed_in <http://www.researchspace.org/resource/system/vocab/authority_manager_config_types> .
                                ?scheme <http://www.researchspace.org/resource/system/authority_manager/item_label> ?schemeLabel .
                                FILTER NOT EXISTS {
                                  ?scheme <http://www.researchspace.org/resource/system/authority_manager/membership_property> ?membershipProperty .
                                }
                              }
                          '
                  ></semantic-search-query-keyword>
              </div>
          </div>

          <semantic-search-result-holder>
              <semantic-search-result>
                  <semantic-table id='scheme-table'
                          query='SELECT DISTINCT ?scheme ?schemeLabel ?isManaged WHERE {} ORDER BY ASC(STR(LCASE(?schemeLabel)))'
                          number-of-displayed-rows=15
                          options='{"showTableHeading": false, "showFilter": false}'
                          no-result-template='{{> noScheme}}'
                          column-configuration='[
                              { "variableName": "scheme", "cellTemplate": "{{> schemeRow}}" }
                          ]'>
                      <template id="noScheme">
                          <div style="padding: 12px 8px">
                              No entity configuration available
                          </div>
                      </template>

                      <template id='schemeRow'>
                          <div class="scheme-table-row">
                              {{log "table" this}}
                              {{#if frameId}}
                                <mp-event-trigger id='{{frameId}}-entity-type-edit-trigger--{{scheme.value}}' type='Component.TemplateUpdate'
                                                  data='{"entityTypeConfig": "{{scheme.value}}"}' targets='["{{frameId}}-entity-editor-frame"]'>
                                  <span class='schema-label' title="Edit {{schemeLabel.value}}">{{schemeLabel.value}}</span>
                                </mp-event-trigger>
                              {{else}}
                                <semantic-link iri="{{scheme.value}}" class="schema-label">{{schemeLabel.value}}</semantic-link>
                                <div class="btn-table-container">
                                  <semantic-link-container uri='{{scheme.value}}' class="schema-label">
                                                  <button class="btn-table">Show Entities</button>
                                  </semantic-link-container>
                                </div>
                              {{/if}}
                          </div>
                      </template>
                  </semantic-table>
              </semantic-search-result>
          </semantic-search-result-holder>
      </semantic-search>
  </div>  
</div>