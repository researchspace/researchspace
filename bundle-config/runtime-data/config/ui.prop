preferredLabels = { ?subject <http://www.cidoc-crm.org/cidoc-crm/P1_is_identified_by> ?appellation . ?appellation a <http://www.cidoc-crm.org/cidoc-crm/E41_Appellation> . ?appellation <http://www.cidoc-crm.org/cidoc-crm/P2_has_type> <http://www.researchspace.org/resource/system/vocab/resource_type/primary_appellation> . ?appellation <http://www.cidoc-crm.org/cidoc-crm/P190_has_symbolic_content> ?value . },{?subject crm:P190_has_symbolic_content ?value .},{ ?subject crm:P48_has_preferred_identifier ?identifier . ?identifier a <http://www.cidoc-crm.org/cidoc-crm/E42_Identifier> . ?identifier <http://www.cidoc-crm.org/cidoc-crm/P190_has_symbolic_content> ?value .},{ ?subject crm:P170i_time_is_defined_by ?timePrimitive . ?timePrimitive a crm:E61_Time_Primitive . ?timePrimitive crm:P2_has_type <http://www.researchspace.org/resource/system/vocab/resource_type/primary_time_primitive> . ?timePrimitive crm:P190_has_symbolic_content ?value .},<http://www.cidoc-crm.org/cidoc-crm/P1_is_identified_by>/<http://www.w3.org/2000/01/rdf-schema#label>,<http://www.researchspace.org/ontology/displayLabel>,<http://www.w3.org/2000/01/rdf-schema#label>,<http://www.w3.org/2004/02/skos/core#prefLabel>

preferredThumbnails = { ?subject rs:PX_has_main_representation ?representation . ?representation a rs:EX_Digital_Image . ?representation crmdig:L60i_is_documented_by/crmdig:L11_had_output/rs:PX_has_file_name ?fileName. BIND(CONCAT('/proxy/IIIF/'\\, ?fileName\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject rs:PX_has_main_representation ?representation . ?representation a rs:EX_Digital_Image . BIND(REPLACE(STR(?representation)\\, "^.*/(.*)$"\\, "$1") as ?imageID) . BIND(CONCAT('/proxy/IIIF/'\\, ?imageID\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject a rs:EX_Digital_Image . ?subject crmdig:L60i_is_documented_by/crmdig:L11_had_output/rs:PX_has_file_name ?fileName. BIND(CONCAT('/proxy/IIIF/'\\, ?fileName\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject a rs:EX_Digital_Image . BIND(REPLACE(STR(?subject)\\, "^.*/(.*)$"\\, "$1") as ?imageID) . BIND(CONCAT('/proxy/IIIF/'\\, ?imageID\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rs:EX_Digital_Image . ?representation crmdig:L60i_is_documented_by/crmdig:L11_had_output/rs:PX_has_file_name ?fileName. BIND(CONCAT('/proxy/IIIF/'\\, ?fileName\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rs:EX_Digital_Image . BIND(REPLACE(STR(?representation)\\, "^.*/(.*)$"\\, "$1") as ?imageID) . BIND(CONCAT('/proxy/IIIF/'\\, ?imageID\\, '/full/!640\\,480/0/default.jpg') AS ?value) },{ ?subject rs:PX_has_main_representation ?representation . ?representation a rs:EX_Digital_Image_Region . \n    ?representation crmdig:L49_is_primary_area_of ?image . ?image <http://www.cidoc-crm.org/extensions/crmdig/L60i_is_documented_by> ?digitisationProcess . \n    ?digitisationProcess <http://www.cidoc-crm.org/extensions/crmdig/L11_had_output>/rs:PX_has_file_name ?imageFileName . \n    ?representation rs:boundingBox ?bb. BIND(STRAFTER(?bb\\, 'xywh=') AS ?boundingBox). \n\tBIND(REPLACE(STR(?imageFileName)\\, "^.*/(.*)$"\\, "$1") as ?imageID) . \n\tBIND(CONCAT('/proxy/IIIF/'\\, ?imageID\\, '/'\\, ?boundingBox\\, '/!640\\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rs:EX_Digital_Image_Region . ?representation crmdig:L49_is_primary_area_of ?image . ?image crmdig:L60i_is_documented_by/crmdig:L11_had_output/rs:PX_has_file_name ?fileName. ?representation rs:boundingBox ?bb. BIND(STRAFTER(?bb\\, 'xywh=') AS ?boundingBox). BIND(CONCAT('/proxy/IIIF/'\\, ?fileName\\, '/'\\, ?boundingBox\\, '/!640\\,480/0/default.jpg') AS ?value) },{ ?subject crm:P138i_has_representation ?representation . ?representation a rs:EX_Digital_Image_Region . ?representation crmdig:L49_is_primary_area_of ?image . ?representation rs:boundingBox ?bb. BIND(STRAFTER(?bb\\, 'xywh=') AS ?boundingBox). BIND(REPLACE(STR(?image)\\, "^.*/(.*)$"\\, "$1") as ?imageID) . BIND(CONCAT('/proxy/IIIF/'\\, ?imageID\\, '/'\\, ?boundingBox\\, '/!640\\,480/0/default.jpg') AS ?value) },<http://www.researchspace.org/ontology/PX_has_main_representation>,<http://www.cidoc-crm.org/cidoc-crm/P138i_has_representation>,{ ?object <http://www.researchspace.org/ontology/PX_has_main_representation> ?subject . BIND(?subject as ?value) }

templateIncludeQuery = PREFIX rs: <http://www.researchspace.org/ontology/> PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#> PREFIX crm: <http://www.cidoc-crm.org/cidoc-crm/>  select ?type where { { FILTER(STRSTARTS(STR(??)\\, "http://www.researchspace.org/resource/user/")). BIND(rs:User as ?type). BIND(-1 as ?index) } UNION {?? <http://www.researchspace.org/ontology/PX_object_type>  ?type . BIND(0 AS ?index) } UNION {?? <http://www.cidoc-crm.org/cidoc-crm/P2_has_type>  ?type . BIND(1 AS ?index) } UNION { ?? a ?type . BIND(2 AS ?index) }  UNION { ?? a ?t .  ?t rdfs:subClassOf* ?type . FILTER (?type in (crm:E28_Conceptual_Object\\, crm:E24_Physical_Man-Made_Thing\\, crm:E39_Actor\\, crm:E53_Place\\, crm:E5_Event)). BIND(3 AS ?index) }  UNION { ?? a ?t . ?t rdfs:subClassOf+ ?type . BIND(4 AS ?index) } } ORDER BY ?index
